/*!
 * =============================================================================
 * @spearwolf/eventize v0.6.6 -- https://github.com/spearwolf/eventize.git
 * =============================================================================
 *
 * Copyright 2015-2019 Wolfger Schramm <wolfger@spearwolf.de>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).eventize=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="*",s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize),f=function(e,t,n){"function"==typeof t&&t.apply(e,n)},c=function(t){switch(e(t)){case"function":return 1;case"string":return 2;case"object":return 4}},l=0,h=function(){return++l},y=function(){function e(n,r,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t(this,e),this.id=h(),this.eventName=n,this.isCatchEmAll=n===o,this.listener=i,this.listenerObject=s,this.priority=r,this.listenerType=c(i),this.callAfterApply=void 0,this.isRemoved=!1}return r(e,[{key:"isEqual",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e===this||("number"==typeof e&&e===this.id||(null===t&&"string"==typeof e?e===o||e===this.eventName:this.listener===e&&this.listenerObject===t))}},{key:"apply",value:function(e,t){if(!this.isRemoved){var n=this.listener,r=this.listenerObject;switch(this.listenerType){case 1:f(r,n,t),this.callAfterApply&&this.callAfterApply();break;case 2:f(r,r[n],t),this.callAfterApply&&this.callAfterApply();break;case 4:var i=n[e];(this.isCatchEmAll||this.eventName===e)&&("function"==typeof i?i.apply(n,t):function(e,t,n){f(t,t.emit,[e].concat(n))}(e,n,t),this.callAfterApply&&this.callAfterApply())}}}}]),e}(),v=function(e,t){return e.priority!==t.priority?t.priority-e.priority:e.id-t.id},p=function(e){if(e)return e.slice(0)},m=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},d=function(e,t,n){var r=e.findIndex(function(e){return e.isEqual(t,n)});r>-1&&(e[r].isRemoved=!0,e.splice(r,1))},A=function(e){e&&(e.forEach(function(e){e.isRemoved=!0}),e.length=0)},b=function(){function e(){t(this,e),this.namedListeners=new Map,this.catchEmAllListeners=[]}return r(e,[{key:"add",value:function(e){if(e.isCatchEmAll)this.catchEmAllListeners.push(e),this.catchEmAllListeners.sort(v);else{var t=e.eventName,n=this.namedListeners.get(t);n||(n=[],this.namedListeners.set(t,n)),n.push(e),n.sort(v)}}},{key:"remove",value:function(e,t){if(null==t&&Array.isArray(e))e.forEach(this.remove.bind(this));else if(null==e||null==t&&e===o)this.removeAllListeners();else if(null==t&&"string"==typeof e){var n=this.namedListeners.get(e);A(n)}else e instanceof y?(e.isRemoved=!0,this.namedListeners.forEach(function(t){return m(t,e)}),m(this.catchEmAllListeners,e)):(this.namedListeners.forEach(function(n){return d(n,e,t)}),d(this.catchEmAllListeners,e,t))}},{key:"removeAllListeners",value:function(){this.namedListeners.forEach(function(e){return A(e)}),this.namedListeners.clear(),A(this.catchEmAllListeners)}},{key:"forEach",value:function(e,t){var n=p(this.catchEmAllListeners),r=p(this.namedListeners.get(e));if(e!==o&&r&&0!==r.length)if(0===n.length)r.forEach(t);else for(var i=r.length,s=n.length,a=0,u=0;a<i||u<s;){if(a<i){var f=r[a];if(u>=s||f.priority>=n[u].priority){t(f),++a;continue}}u<s&&(t(n[u]),++u)}else n.forEach(t)}}]),e}(),E=function(){function e(){t(this,e),this.events=new Map,this.eventNames=new Set}return r(e,[{key:"add",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.eventNames.add(e)}):this.eventNames.add(e)}},{key:"remove",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){return t.remove(e)}):this.eventNames.delete(e)}},{key:"retain",value:function(e,t){this.eventNames.has(e)&&this.events.set(e,t)}},{key:"isKnown",value:function(e){return this.eventNames.has(e)}},{key:"emit",value:function(e,t){var n=this;if(e===o)this.eventNames.forEach(function(e){return n.emit(e,t)});else{var r=this.events.get(e);r&&t.apply(e,r)}}}]),e}(),g=function(e,t,n){return Object.defineProperty(e,t,{value:n,configurable:!0}),e},w="undefined"!=typeof console,L=w?console[console.warn?"warn":"log"].bind(console,"[@spearwolf/eventize]"):function(){},I=function(t,n,r){var s,a,u,f,c=r.length,l=e(r[0]);if(c>=2&&c<=3&&"number"===l){s=o;var h=i(r,3);a=h[0],u=h[1],f=h[2]}else if(c>=3&&c<=4&&"number"==typeof r[1]){var v=i(r,4);s=v[0],a=v[1],u=v[2],f=v[3]}else if(a=0,"string"===l||Array.isArray(r[0])){var p=i(r,3);s=p[0],u=p[1],f=p[2]}else{s=o;var m=i(r,2);u=m[0],f=m[1]}if(u||!w){var d=function(e){return function(r){return function(e,t,n,r,i,o){var s=new y(n,r,i,o);return e.add(s),t.emit(n,s),s}(t,n,r,e,u,f)}};return Array.isArray(s)?s.map(function(e){return Array.isArray(e)?d(e[1])(e[0]):d(a)(e)}):d(a)(s)}L("called with insufficient arguments!",r)},N=function(e){return function(t){t.callAfterApply=function(){return e.off(t)}}};function O(e){if(e[u])return e;var t=new b,n=new E;return g(e,u,{keeper:n,store:t}),Object.assign(e,{on:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return I(t,n,r)},once:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s=I(t,n,i);return Array.isArray(s)?s.forEach(N(e)):N(e)(s),s},off:function(e,r){t.remove(e,r),Array.isArray(e)?n.remove(e.filter(function(e){return"string"==typeof e})):"string"==typeof e&&n.remove(e)},emit:function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];Array.isArray(e)?e.forEach(function(e){t.forEach(e,function(t){return t.apply(e,i)}),n.retain(e,i)}):e!==o&&(t.forEach(e,function(t){return t.apply(e,i)}),n.retain(e,i))},retain:function(e){n.add(e)}}),e}function k(e){return O(e)}return k.inject=O,k.extend=function(e){return O(Object.create(e))},k.create=function(e){var t=O({});return t.on(o,0,e),t},k.is=function(e){return!(!e||!e[u])},Object.assign(k,{PRIO_MAX:s,PRIO_A:1e9,PRIO_B:1e6,PRIO_C:1e3,PRIO_DEFAULT:0,PRIO_LOW:-1e4,PRIO_MIN:a}),k});
//# sourceMappingURL=eventize.umd.js.map
