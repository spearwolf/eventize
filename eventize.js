/**
 * ===============================================================
 * eventize.js v0.0.13 -- https://github.com/spearwolf/eventize
 * ===============================================================
 *
 * Copyright 2015-16 Wolfger Schramm <wolfger@spearwolf.de>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.eventize=n()}}(function(){return function n(e,t,o){function r(i,u){if(!t[i]){if(!e[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(f)return f(i,!0);var a=Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var l=t[i]={exports:{}};e[i][0].call(l.exports,function(n){var t=e[i][1][n];return r(t?t:n)},l,l.exports,n,e,t,o)}return t[i].exports}for(var f="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(n,e,t){"use strict";function o(n){function e(){return++u.lastCallbackId}function t(n,e){return n.prio!==e.prio?e.prio-n.prio:n.id-e.id}function r(n){if(n){var e=u.boundObjects.indexOf(n);return e===-1&&u.boundObjects.push(n),n}}function f(n,e,t){var r,f,i,u;for(f in t)t.hasOwnProperty(f)&&(i=e[f],"function"==typeof i&&(r=t[f],Array.isArray(r)?(u=r[0],r=r[1]):u=o.PRIO_DEFAULT,n.on(r,u,i)));return n}function i(n,e,t){function r(){var e,o,r;if(d)for(e=0;e<d;e++)o=u.boundObjects[e],r=o[n],"function"==typeof r?t(r,o):o[s]&&t(null,o)}if(!(v.silenced||v.off.indexOf(n)>=0)){var f,i,c,a=u.callbacks[n],l=u.callbacks[p],d=u.boundObjects.length,y=!1;if(a||l.length)for(a=a?a.concat(l):l,i=a.length,f=0;f<i;f++)c=a[f],!y&&c&&c.prio<o.PRIO_DEFAULT&&(r(),y=!0),e(c);y||r()}}if(n[s])return n;var u={lastCallbackId:0,callbacks:{},boundObjects:[]};u.callbacks[p]=[];var v=a({},{silenced:!1,off:[]});return l(n,s,v),void 0===o.PRIO_DEFAULT&&a(o,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),n.on=function(n,r,f){var i=arguments.length;if(0===i)return void(v.silenced&&(c(v,"silenced",!1),v.off.length=0));var l;if(1===i){if("string"==typeof n)return l=v.off.indexOf(n),void(l>=0&&v.off.splice(l,1));if("object"!=typeof n&&"function"!=typeof n)return void console.warn(d,".on() called with insufficient arguments!",arguments);f=n,n=p,r=o.PRIO_DEFAULT}2===i&&(f=r,r=o.PRIO_DEFAULT);var s=u.callbacks,y=s[n]||(s[n]=[]),x=e(),b=a({},{id:x,fn:f,prio:"number"!=typeof r?o.PRIO_DEFAULT:r,isFunction:"function"==typeof f});return y.push(b),y.sort(t),x},n.once=function(e,t,r){var f=arguments.length;if(!f||f>3)return void console.warn(d,".once() called with insufficient arguments!",arguments);1===f?(r=e,e=p,t=o.PRIO_DEFAULT):2===f&&(r=t,t=o.PRIO_DEFAULT);var i=n.on(e,t,function(){var e=r.apply(this,arguments);return n.off(i),e});return i},n.off=function(n){if(0===arguments.length)return void(v.silenced||(c(v,"silenced",!0),v.off.length=0));if("string"==typeof n)return void(v.off.indexOf(n)===-1&&v.off.push(n));var e,t,o,r,f,i=u.callbacks,a="object"==typeof n;if("number"==typeof n||"function"==typeof n||a)for(f=Object.keys(i),o=0;o<f.length;o++)for(r=i[f[o]],t=0;t<r.length;t++)if(e=r[t],(e.id===n||e.fn===n)&&(r.splice(t,1),!a))return;a&&(t=u.boundObjects.indexOf(n),t>=0&&u.boundObjects.splice(t,1))},n.connect=function(n,e){var t=arguments.length;return 1===t?r(n):2===t?f(this,n,e):void console.warn(d,".connect() called with insufficient arguments!",arguments)},n.emit=function(){for(var n=Array(arguments.length),e=0;e<n.length;++e)n[e]=arguments[e];var t,o,r,f=this;n.length>1&&"string"!=typeof n[0]&&"string"==typeof n[1]?(o=n.shift(),t=n.shift(),n[n.length-1]=o,r=n):(t=n.shift(),r=n.concat([f])),i(t,function(e){if(e.isFunction)e.fn.apply(f,n);else{var o=e.fn[t];"function"==typeof o?o.apply(e.fn,r):e.fn[s]&&e.fn.emit.apply(e.fn,[t].concat(n))}},function(n,e){n?n.apply(e,r):e.emit.apply(e,[f,t].concat(r))})},n.emitReduce=function(){function n(n){void 0!==n&&(o=n)}for(var e=Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var o,r=e.shift();0===e.length?(o={},e.push(o)):n(e[0]);var f=this,u=[r].concat(e),c=e.concat([f]);return i(r,function(t){if(t.isFunction)e[0]=o,n(t.fn.apply(f,e));else{var i=t.fn[r];"function"==typeof i?(c[0]=o,n(i.apply(t.fn,c))):t.fn[s]&&(u[1]=o,n(t.fn.emitReduce.apply(t.fn,u)))}},function(e,t){e&&(c[0]=o,n(e.apply(t,c)))}),o},n}function r(n,e){var t=("string"==typeof n||"symbol"==typeof n)&&n||f(),r=o({}),i=!(!e||!e.replace),u=function(n){c(r,v,n)},a=function(n){r.emit.apply(r,n)};return l(r,"events",[]),c(r,"name",t),r.collect=function(){return r[v]!==x&&u(x),r},r.emit=function(){var n=Array.prototype.slice.call(arguments,0);if(r[v]===y)a(n);else{if(i)for(var e=0,t=r.events.length;e<t;e++)if(r.events[e][0]===n[0])return void(r.events[e]=n);r.events.push(n)}},r.play=function(){return r[v]!==y&&(u(y),r.events.forEach(a),r.events.length=0),r},r.play()}function f(){var n=Date.now()+Math.random();"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(n+=performance.now());var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*n|0,o="x"==e?t:3&t|8;return o.toString(16)});return i()?Symbol(e):e}function i(){return"undefined"!=typeof Symbol}function u(){return"undefined"!=typeof Map}function c(n,e,t){return Object.defineProperty(n,e,{value:t,configurable:!0,enumerable:!0}),n}function a(n,e){var t,o=Object.keys(e);for(t=o.length;t--;)c(n,o[t],e[o[t]]);return n}function l(n,e,t){return Object.defineProperty(n,e,{value:t,configurable:!0}),n}var s=void 0!==typeof Symbol?Symbol("eventize"):"_eventize",p="*",d="[eventize.js]";o.is=function(n){return!(!n||!n[s])},o.EventizeNamespace=s,l(o,"queues",u()?new Map:{}),o.queue=function(n,e){var t=u(),f=n?t?o.queues.get(n):o.queues[n]:null;return f||(f=r(n,e),t?o.queues.set(f.name,f):o.queues[f.name]=f),f};var v="state",y="play",x="collect";e.exports=o},{}]},{},[1])(1)});