/**
 * ===============================================================
 * eventize.js v0.1.1 -- https://github.com/spearwolf/eventize
 * ===============================================================
 *
 * Copyright 2015-16 Wolfger Schramm <wolfger@spearwolf.de>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).eventize=e()}}(function(){return function e(n,t,o){function i(r,u){if(!t[r]){if(!n[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(f)return f(r,!0);var l=Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var a=t[r]={exports:{}};n[r][0].call(a.exports,function(e){var t=n[r][1][e];return i(t||e)},a,a.exports,e,n,t,o)}return t[r].exports}for(var f="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,n,t){"use strict";function o(e){function n(){return++a.lastCallbackId}function t(e,n){return e.prio!==n.prio?n.prio-e.prio:e.id-n.id}function i(e){if(e)return-1===a.boundObjects.indexOf(e)&&a.boundObjects.push(e),e}function f(e,n,t){var i,f,r,u;for(f in t)t.hasOwnProperty(f)&&"function"==typeof(r=n[f])&&(i=t[f],Array.isArray(i)?(u=i[0],i=i[1]):u=o.PRIO_DEFAULT,e.on(i,u,r));return e}function l(e,n,t){function i(){var n,o,i;if(s)for(n=0;n<s;n++)"function"==typeof(i=(o=a.boundObjects[n])[e])?t(i,o):o[p]&&t(null,o)}if(!(v.silenced||v.off.indexOf(e)>=0)){var f,r,u,c=a.callbacks[e],l=a.callbacks[d],s=a.boundObjects.length,y=!1;if(c||l.length)for(r=(c=c?c.concat(l):l).length,f=0;f<r;f++)u=c[f],!y&&u&&u.prio<o.PRIO_DEFAULT&&(i(),y=!0),n(u);y||i()}}if(e[p])return e;var a={lastCallbackId:0,callbacks:{},boundObjects:[]};a.callbacks[d]=[];var v=u({},{silenced:!1,off:[]});return c(e,p,v),void 0===o.PRIO_DEFAULT&&u(o,{PRIO_MAX:Number.POSITIVE_INFINITY,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:Number.NEGATIVE_INFINITY}),e.on=function(e,i,f){var c=arguments.length;{if(0!==c){var l;if(1===c){if("string"==typeof e)return void((l=v.off.indexOf(e))>=0&&v.off.splice(l,1));if("object"!=typeof e&&"function"!=typeof e)return void(s&&console.warn(y,".on() called with insufficient arguments!",arguments));f=e,e=d,i=o.PRIO_DEFAULT}2===c&&(f=i,i=o.PRIO_DEFAULT);var p=a.callbacks,b=p[e]||(p[e]=[]),h=n(),x=u({},{id:h,fn:f,prio:"number"!=typeof i?o.PRIO_DEFAULT:i,isFunction:"function"==typeof f});return b.push(x),b.sort(t),h}v.silenced&&(r(v,"silenced",!1),v.off.length=0)}},e.once=function(n,t,i){var f=arguments.length;{if(f&&!(f>3)){1===f?(i=n,n=d,t=o.PRIO_DEFAULT):2===f&&(i=t,t=o.PRIO_DEFAULT);var r=e.on(n,t,function(){var n=i.apply(this,arguments);return e.off(r),n});return r}s&&console.warn(y,".once() called with insufficient arguments!",arguments)}},e.off=function(e){if(0!==arguments.length)if("string"!=typeof e){var n,t,o,i,f,u=a.callbacks,c="object"==typeof e;if("number"==typeof e||"function"==typeof e||c)for(f=Object.keys(u),o=0;o<f.length;o++)for(i=u[f[o]],t=0;t<i.length;t++)if(((n=i[t]).id===e||n.fn===e)&&(i.splice(t,1),!c))return;c&&(t=a.boundObjects.indexOf(e))>=0&&a.boundObjects.splice(t,1)}else-1===v.off.indexOf(e)&&v.off.push(e);else v.silenced||(r(v,"silenced",!0),v.off.length=0)},e.connect=function(e,n){var t=arguments.length;return 1===t?i(e):2===t?f(this,e,n):void(s&&console.warn(y,".connect() called with insufficient arguments!",arguments))},e.emit=function(){for(var e=Array(arguments.length),n=0;n<e.length;++n)e[n]=arguments[n];var t,o,i,f=this;e.length>1&&"string"!=typeof e[0]&&"string"==typeof e[1]?(o=e.shift(),t=e.shift(),e[e.length-1]=o,i=e):(t=e.shift(),i=e.concat([f])),l(t,function(n){if(n.isFunction)n.fn.apply(f,e);else{var o=n.fn[t];"function"==typeof o?o.apply(n.fn,i):n.fn[p]&&n.fn.emit.apply(n.fn,[t].concat(e))}},function(e,n){e?e.apply(n,i):n.emit.apply(n,[f,t].concat(i))})},e.emitReduce=function(){function e(e){void 0!==e&&(o=e)}for(var n=Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];var o,i=n.shift();0===n.length?(o={},n.push(o)):e(n[0]);var f=this,r=[i].concat(n),u=n.concat([f]);return l(i,function(t){if(t.isFunction)n[0]=o,e(t.fn.apply(f,n));else{var c=t.fn[i];"function"==typeof c?(u[0]=o,e(c.apply(t.fn,u))):t.fn[p]&&(r[1]=o,e(t.fn.emitReduce.apply(t.fn,r)))}},function(n,t){n&&(u[0]=o,e(n.apply(t,u)))}),o},e.from=function(e,n){var t=this;return new n(function(n){var o=t.on(e,function(e){n.next(e)});return function(){t.off(o)}})},e.subscribe=function(e,n,t,o){var i=this;return e.subscribe(function(e){i.emit(n,e)},t?function(e){i.emit(t,e)}:void 0,o?function(e){i.emit(o,e)}:void 0)},e}function i(e,n){var t=("string"==typeof e||"symbol"==typeof e)&&e||f(),i=o({}),u=!(!n||!n.replace),l=function(e){r(i,v,e)},a=function(e){return function(n){e.apply(i,n)}}(i.emit);return c(i,"events",[]),r(i,"id",t),i.collect=function(){return i[v]!==h&&l(h),i},i.emit=function(){var e,n=Array(arguments.length);for(e=0;e<n.length;++e)n[e]=arguments[e];if(i[v]===b)a(n);else{if(u){var t,o=n[0];for(e=0,t=i.events.length;e<t;e++)if(i.events[e][0]===o)return void(i.events[e]=n)}i.events.push(n)}},i.play=function(){return i[v]!==b&&(l(b),i.events.forEach(a),i.events.length=0),i},i.toggle=function(){return i[v]!==b?i.play():i.collect()},i.play()}function f(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)});return a?Symbol(e):e}function r(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,enumerable:!0}),e}function u(e,n){var t,o=Object.keys(n);for(t=o.length;t--;)r(e,o[t],n[o[t]]);return e}function c(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0}),e}var l="undefined"!=typeof Map,a="undefined"!=typeof Symbol,s="undefined"!=typeof console,p=a?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",y="[eventize.js]";o.is=function(e){return!(!e||!e[p])},c(o,"EventizeNamespace",p),c(o,"queues",l?new Map:{}),o.queue=function(e){var n,t,f=arguments.length;return f>=1&&("object"==typeof e&&2!==f||(n=l?o.queues.get(e):o.queues[e]),2===f?t=arguments[1]:1===f&&"object"==typeof e&&(t=e)),n||(n=i(e,t),l?o.queues.set(n.id,n):o.queues[n.id]=n),n};var v="state",b="play",h="collect";n.exports=o},{}]},{},[1])(1)});