/**
 * ===============================================================
 * eventize.js v0.2.0 -- https://github.com/spearwolf/eventize
 * ===============================================================
 *
 * Copyright 2015-17 Wolfger Schramm <wolfger@spearwolf.de>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).eventize=e()}}(function(){return function e(n,t,i){function o(r,u){if(!t[r]){if(!n[r]){var c="function"==typeof require&&require;if(!u&&c)return c(r,!0);if(f)return f(r,!0);var l=Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var a=t[r]={exports:{}};n[r][0].call(a.exports,function(e){var t=n[r][1][e];return o(t||e)},a,a.exports,e,n,t,i)}return t[r].exports}for(var f="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,t){"use strict";function i(e){function n(){return++l.lastCallbackId}function t(e,n){return e.prio!==n.prio?n.prio-e.prio:e.id-n.id}function o(e,n,t){var o,f,r,u;for(f in t)t.hasOwnProperty(f)&&"function"==typeof(r=n[f])&&(o=t[f],Array.isArray(o)?(u=o[0],o=o[1]):u=i.PRIO_DEFAULT,e.on(o,u,r));return e}function f(e,n,t){function o(){var n,i,o;if(v)for(n=0;n<v;n++)"function"==typeof(o=(i=l.boundObjects[n])[e])?t(o,i):i[p]&&t(null,i)}if(!(a.silenced||a.off.indexOf(e)>=0)){var f,r,u,c=l.callbacks[e],s=l.callbacks[d],v=l.boundObjects.length,y=!1;if(c||s.length)for(r=(c=c?c.concat(s):s).length,f=0;f<r;f++)u=c[f],!y&&u&&u.prio<i.PRIO_DEFAULT&&(o(),y=!0),n(u);y||o()}}if(e[p])return e;var l={lastCallbackId:0,callbacks:{},boundObjects:[]};l.callbacks[d]=[];var a=u({},{silenced:!1,off:[]});return c(e,p,a),void 0===i.PRIO_DEFAULT&&u(i,{PRIO_MAX:1/0,PRIO_A:1e9,PRIO_B:1e7,PRIO_C:1e5,PRIO_DEFAULT:0,PRIO_LOW:-1e5,PRIO_MIN:-1/0}),e.on=function(e,o,f){var c=arguments.length;{if(0!==c){var p;if(1===c){if("string"==typeof e)return void((p=a.off.indexOf(e))>=0&&a.off.splice(p,1));if("object"!=typeof e&&"function"!=typeof e)return void(s&&console.warn(v,".on() called with insufficient arguments!",arguments));f=e,e=d,o=i.PRIO_DEFAULT}2===c&&(f=o,o=i.PRIO_DEFAULT);var y=l.callbacks,b=y[e]||(y[e]=[]),x=n(),h=u({},{id:x,fn:f,prio:"number"!=typeof o?i.PRIO_DEFAULT:o,isFunction:"function"==typeof f});return b.push(h),b.sort(t),x}a.silenced&&(r(a,"silenced",!1),a.off.length=0)}},e.once=function(n,t,o){var f=arguments.length;{if(f&&!(f>3)){1===f?(o=n,n=d,t=i.PRIO_DEFAULT):2===f&&(o=t,t=i.PRIO_DEFAULT);var r=e.on(n,t,function(){var n=o.apply(this,arguments);return e.off(r),n});return r}s&&console.warn(v,".once() called with insufficient arguments!",arguments)}},e.off=function(e){if(0!==arguments.length)if("string"!=typeof e){var n,t,i,o,f,u=l.callbacks,c="object"==typeof e;if("number"==typeof e||"function"==typeof e||c)for(f=Object.keys(u),i=0;i<f.length;i++)for(o=u[f[i]],t=0;t<o.length;t++)if(((n=o[t]).id===e||n.fn===e)&&(o.splice(t,1),!c))return;c&&(t=l.boundObjects.indexOf(e))>=0&&l.boundObjects.splice(t,1)}else-1===a.off.indexOf(e)&&a.off.push(e);else a.silenced||(r(a,"silenced",!0),a.off.length=0)},e.connect=function(e,n){var t=arguments.length;if(2===t)return o(this,e,n);s&&console.warn(v,".connect() called with insufficient arguments (need 2 args, but got "+t+")",arguments)},e.emit=function(){for(var e=Array(arguments.length),n=0;n<e.length;++n)e[n]=arguments[n];var t=e[0],i=e.slice(1),o=this;f(t,function(n){if(n.isFunction)n.fn.apply(o,i);else{var f=n.fn[t];"function"==typeof f?f.apply(n.fn,i):n.fn.emit&&n.fn.emit.apply(n.fn,e)}},function(n,t){n?n.apply(t,i):t.emit&&t.emit.apply(t,e)})},e.emitReduce=function(){function e(e){void 0!==e&&(i=e)}for(var n=Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];var i,o=n.shift();0===n.length?(i={},n.push(i)):e(n[0]);var r=this,u=[o].concat(n);return f(o,function(t){if(t.isFunction)n[0]=i,e(t.fn.apply(r,n));else{var f=t.fn[o];"function"==typeof f?(n[0]=i,e(f.apply(t.fn,n))):t.fn.emitReduce&&(u[1]=i,e(t.fn.emitReduce.apply(t.fn,u)))}},function(t,o){t&&(n[0]=i,e(t.apply(o,n)))}),i},e.from=function(e,n){var t=this;return new n(function(n){var i=t.on(e,function(e){n.next(e)});return function(){t.off(i)}})},e.subscribe=function(e,n,t,i){var o=this;return e.subscribe(function(e){o.emit(n,e)},t?function(e){o.emit(t,e)}:void 0,i?function(e){o.emit(i,e)}:void 0)},e}function o(e,n){var t=("string"==typeof e||"symbol"==typeof e)&&e||f(),o=i({}),u=!(!n||!n.replace),l=function(e){r(o,y,e)},a=function(e){return function(n){e.apply(o,n)}}(o.emit);return c(o,"events",[]),r(o,"id",t),o.collect=function(){return o[y]!==x&&l(x),o},o.emit=function(){var e,n=Array(arguments.length);for(e=0;e<n.length;++e)n[e]=arguments[e];if(o[y]===b)a(n);else{if(u){var t,i=n[0];for(e=0,t=o.events.length;e<t;e++)if(o.events[e][0]===i)return void(o.events[e]=n)}o.events.push(n)}},o.play=function(){return o[y]!==b&&(l(b),o.events.forEach(a),o.events.length=0),o},o.toggle=function(){return o[y]!==b?o.play():o.collect()},o.play()}function f(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)});return a?Symbol(e):e}function r(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0,enumerable:!0}),e}function u(e,n){var t,i=Object.keys(n);for(t=i.length;t--;)r(e,i[t],n[i[t]]);return e}function c(e,n,t){return Object.defineProperty(e,n,{value:t,configurable:!0}),e}var l="undefined"!=typeof Map,a="undefined"!=typeof Symbol,s=void 0!==console,p=a?(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize):"@@eventize",d="*",v="[eventize.js]";i.is=function(e){return!(!e||!e[p])},c(i,"EventizeNamespace",p),c(i,"queues",l?new Map:{}),i.queue=function(e){var n,t,f=arguments.length;return f>=1&&("object"==typeof e&&2!==f||(n=l?i.queues.get(e):i.queues[e]),2===f?t=arguments[1]:1===f&&"object"==typeof e&&(t=e)),n||(n=o(e,t),l?i.queues.set(n.id,n):i.queues[n.id]=n),n};var y="state",b="play",x="collect";n.exports=i},{}]},{},[1])(1)});